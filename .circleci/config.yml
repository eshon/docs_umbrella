version: 2.1
executors:
  node-executor:
    docker:
      - image: circleci/node:stretch 

jobs:
  build:
    executor: node-executor
    steps:
      - run:
          name: Update npm
          command: 'sudo npm install -g npm@latest'
      - run:
          name: Install docsify
          command: 'sudo npm i docsify-cli -g'
      - checkout
      - run:
          name: 'Update the submodule'
          command: 'git submodule update --init --recursive'
      - run:
          name: Copy wiki over to docs and don't include .git file
          command: 'find testwikidocs -not -iname '.git' -mindepth 1 -exec cp -Rv --parents {} docs/ ';''
      - run:
          name: Show contents of docs
          command: 'ls -la docs'
      - run:
          name: Show contents of testwikidocs
          command: 'ls -la testwikidocs'
