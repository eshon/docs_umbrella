version: 2
jobs:
  build:
    docker:
      - image: circleci/node:stretch 
    steps:
      - run:
          name: Update npm
          command: 'sudo npm install -g npm@latest'
      - run:
          name: Install docsify
          command: 'sudo npm i docsify-cli -g'
      - checkout
      - run:
          name: 'Update the submodule'
          command: 'git submodule update --init --recursive --remote'
      - run:
          name: Copy wiki over to docs
          command: 'cp -Rv testwikidocs/* docs/'
      - run:
          name: Show contents of docs
          command: 'ls -la docs'
      - run:
          name: config user email
          command: 'git config --global user.email "eva@protocol.ai"'
      - run:
          name: config user name
          command: 'git config --global user.name "eshon"'
      - run:
          name: add new files
          command: 'git add .'
      - run:
          name: commit files
          command: 'git commit -m "Automated Rebuild"'
      - run:
          name: commit files
          command: 'git push -f origin master'
          
